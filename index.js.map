{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '47496497-c7088e577ab65ea786e483a4c';\n\nexport async function fetchImages(query, page, perPage) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  });\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${searchParams}`);\n    return response.data;\n  } catch (error) {\n    throw new Error('Error fetching images from API');\n  }\n}\n","export function createGalleryMarkup(images) {\n  return images\n    .map(\n      image => `\n    <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery_image\">\n      <div class=\"gallery-info\">\n        <p><b>Likes:</b> ${image.likes}</p>\n        <p><b>Views:</b> ${image.views}</p>\n        <p><b>Comments:</b> ${image.comments}</p>\n        <p><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { createGalleryMarkup } from './js/render-functions';\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.getElementById('loader');\nconst loadMoreBtn = document.getElementById('load-more');\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\niziToast.settings({\n  timeout: 1000,\n  color: '#EF4040',\n  position: 'topRight',\n  titleColor: '#fff',\n  messageColor: '#fff',\n  imageWidth: 24,\n  iconColor: '#fff',\n});\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\nhideLoadMoreBtn();\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.target.elements.searchQuery.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Empty Field',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await fetchImages(query, page, perPage);\n    hideLoader();\n\n    if (hits.length > 0) {\n      gallery.innerHTML = createGalleryMarkup(hits);\n      lightbox.refresh();\n      if (totalHits > perPage) {\n        showLoadMoreBtn();\n      }\n    } else {\n      iziToast.info({\n        title: 'No Results',\n        message: 'Sorry, there are no images matching your search query.',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  }\n\n  searchForm.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await fetchImages(query, page, perPage);\n    hideLoader();\n\n    if (hits.length > 0) {\n      gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(hits));\n      lightbox.refresh();\n\n      const loadedImages = page * perPage;\n      if (loadedImages >= totalHits) {\n        hideLoadMoreBtn();\n        iziToast.info({\n          title: 'End of Results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n\n      // Scroll page\n      const { height: cardHeight } =\n        gallery.firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  }\n});\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","searchParams","axios","createGalleryMarkup","images","image","searchForm","gallery","loader","loadMoreBtn","iziToast","lightbox","SimpleLightbox","showLoader","hideLoader","clearGallery","hideLoadMoreBtn","showLoadMoreBtn","event","hits","totalHits","cardHeight"],"mappings":"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"}